(this.webpackJsonporder_book_bitbay=this.webpackJsonporder_book_bitbay||[]).push([[0],{44:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(8),a=n.n(c),i=(n(44),n(34)),s=n.n(i),o=n(41),u=n(30),b=n(99),j=n(100),d=n(97),l=n(92),f=n(95),O=n(103),h=n(101),x=n(102),p=n(3),m=Object(l.a)({formControl:{minWidth:120}}),v=function(e){var t=e.currencies,n=e.pair,r=e.setPair,c=m();return Object(p.jsxs)(f.a,{variant:"outlined",className:c.formControl,children:[Object(p.jsx)(O.a,{id:"currency-pair",children:"Currency Pair"}),Object(p.jsxs)(h.a,{labelId:"currency-pair",id:"currency-pair",value:n,onChange:function(e){r(e.target.value)},label:"currency-pair",children:[Object(p.jsx)(x.a,{value:n,children:n}),t&&t.map((function(e){return Object(p.jsx)(x.a,{value:e,children:e},e)}))]})]})},y=n(98),g=function(e){var t=e.spread;return Object(p.jsx)("div",{children:Object(p.jsxs)(y.a,{children:["Spread: ",Object(p.jsx)("b",{children:Math.floor(100*t)/100})]})})},N=function(e){var t=e.min,n=e.max;return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{children:[Object(p.jsxs)(y.a,{children:["Min: ",Object(p.jsx)("b",{children:t})]}),Object(p.jsxs)(y.a,{children:["Max: ",Object(p.jsx)("b",{children:n})]})]})})},k=Object(l.a)({offer:{display:"flex",justifyContent:"space-between",backgroundColor:"#D3D3D3",margin:"1rem",padding:"1rem"},values:{fontWeight:"bold"}}),S=function(e){var t=e.rate,n=e.quantity,r=e.numberOfOffers,c=e.currency,a=k();return Object(p.jsxs)("div",{className:a.offer,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(y.a,{children:"Kurs"}),Object(p.jsx)(y.a,{className:a.values,children:t})]}),Object(p.jsxs)("div",{children:[Object(p.jsxs)(y.a,{children:["Ilosc ",c]}),Object(p.jsx)(y.a,{className:a.values,children:n})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)(y.a,{children:"Wartosc PLN "}),Object(p.jsx)(y.a,{className:a.values,children:Math.floor(t*n*100)/100})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)(y.a,{children:"Liczba offert"}),Object(p.jsx)(y.a,{className:a.values,children:r})]})]})},w=n(42);function C(e,t){return e.ra<t.ra?-1:e.ra>t.ra?1:0}var E=function(e){return"".concat(e,"_").concat((new Date).getTime())},q=function(e){var t=e.bid,n=e.currency;return Object(p.jsxs)("div",{children:[Object(p.jsx)(y.a,{variant:"h6",children:"Bid"}),t.map((function(e){return Object(p.jsx)(S,{rate:e.ra,quantity:e.ca,numberOfOffers:e.co,currency:n},E(e.ra))}))]})},D=function(e){var t=e.ask,n=e.currency;return Object(p.jsxs)("div",{children:[Object(p.jsx)(y.a,{variant:"h6",color:"initial",children:"Ask"}),t.map((function(e){return Object(p.jsx)(S,{rate:e.ra,quantity:e.ca,numberOfOffers:e.co,currency:n},E(e.ra))}))]})},J=Object(l.a)({header:{display:"flex",justifyContent:"space-between",padding:"1rem",backgroundColor:"#D3D3D3"},column:{textAlign:"center",display:"flex",flexDirection:"column"}});var P=function(){var e=J(),t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)("BTC-PLN"),l=Object(u.a)(i,2),f=l[0],O=l[1],h=Object(r.useState)({}),x=Object(u.a)(h,2),m=x[0],y=x[1],k=Object(r.useState)([]),S=Object(u.a)(k,2),E=S[0],P=S[1],T=Object(r.useState)([]),I=Object(u.a)(T,2),W=I[0],B=I[1],_=f.split("-")[0],L="https://api.bitbay.net/rest/trading/";return Object(r.useEffect)((function(){var e=[];(function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(L+"ticker").then((function(e){return e.json()})).then((function(t){e=Object.keys(t.items).filter((function(e){return/PLN/.test(e)})).sort()}));case 2:a(e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){var e=new WebSocket("wss://api.bitbay.net/websocket/");return e.onopen=function(){return e.send(JSON.stringify({action:"subscribe-public",module:"trading",path:"orderbook-limited/".concat(f,"/10")}))},e.onmessage=function(e){var t=JSON.parse(e.data);"push"===t.action&&t.message.changes.forEach((function(e){!function(e,t,n){"Buy"===e.entryType&&"remove"===e.action?t((function(t){return t.filter((function(t){return t.ra!==e.rate})).sort(C)})):"Buy"===e.entryType&&"update"===e.action?t((function(t){return t.some((function(t){return t.ra===e.rate}))?t.map((function(t){return t.ra===e.rate?e.state:t})).sort(C):[].concat(Object(w.a)(t),[e.state]).sort(C)})):"Sell"===e.entryType&&"remove"===e.action?n((function(t){return t.filter((function(t){return t.ra!==e.rate})).sort(C)})):"Sell"===e.entryType&&"update"===e.action&&n((function(t){return t.some((function(t){return t.ra===e.rate}))?t.map((function(t){return t.ra===e.rate?e.state:t})).sort(C):[].concat(Object(w.a)(t),[e.state]).sort(C)}))}(e,P,B)}))},function(){e.OPEN&&!e.CONNECTING&&(e.send(JSON.stringify({action:"subscribe-public",module:"trading",path:"orderbook-limited/".concat(f,"/10")})),e.close())}}),[f]),Object(r.useEffect)((function(){var e=new WebSocket("wss://api.bitbay.net/websocket/");return e.onopen=function(){return e.send(JSON.stringify({requestId:"78539fe0-e9b0-4e4e-8c86-70b36aa93d4f",action:"proxy",module:"trading",path:"orderbook-limited/".concat(f,"/10")}))},e.onmessage=function(e){var t=JSON.parse(e.data);P(t.body.buy),B(t.body.sell)},function(){e.OPEN&&!e.CONNECTING&&(e.send(JSON.stringify({requestId:"78539fe0-e9b0-4e4e-8c86-70b36aa93d4f",action:"proxy",module:"trading",path:"orderbook-limited/".concat(f,"/10")})),e.close())}}),[f]),Object(r.useEffect)((function(){var e={};(function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(L+"stats/".concat(f)).then((function(e){return e.json()})).then((function(t){e=t.stats}));case 2:y(e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[f]),Object(p.jsx)(b.a,{maxWidth:"lg",children:Object(p.jsxs)(j.a,{container:!0,spacing:1,children:[Object(p.jsx)(j.a,{item:!0,xs:12,children:Object(p.jsxs)(d.a,{className:e.header,variant:"outlined",square:!0,children:[Object(p.jsx)(v,{currencies:c,setPair:O,pair:f}),Object(p.jsx)(g,{spread:m.v}),Object(p.jsx)(N,{max:m.h,min:m.l})]})}),Object(p.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(d.a,{className:e.column,variant:"outlined",square:!0,children:Object(p.jsx)(q,{pair:f,bid:E,currency:_})})}),Object(p.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(d.a,{className:e.column,variant:"outlined",square:!0,children:Object(p.jsx)(D,{pair:f,ask:W,currency:_})})})]})})};a.a.render(Object(p.jsx)(P,{}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.91238e8c.chunk.js.map