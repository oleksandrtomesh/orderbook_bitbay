(this.webpackJsonporder_book_bitbay=this.webpackJsonporder_book_bitbay||[]).push([[0],{44:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(8),a=n.n(c),i=(n(44),n(15)),s=n.n(i),o=n(26),u=n(14),b=n(99),j=n(100),l=n(97),d=n(92),f=n(95),O=n(103),h=n(101),p=n(102),x=n(3),m=Object(d.a)({formControl:{minWidth:120}}),y=function(e){var t=e.currencies,n=e.pair,r=e.setPair,c=m();return Object(x.jsxs)(f.a,{variant:"outlined",className:c.formControl,children:[Object(x.jsx)(O.a,{id:"currency-pair",children:"Currency Pair"}),Object(x.jsxs)(h.a,{labelId:"currency-pair",id:"currency-pair",value:n,onChange:function(e){r(e.target.value)},label:"currency-pair",children:[Object(x.jsx)(p.a,{value:n,children:n}),t&&t.map((function(e){return Object(x.jsx)(p.a,{value:e,children:e},e)}))]})]})},v=n(98),g=function(e){var t=e.pair,n=Object(r.useState)(""),c=Object(u.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){var e="";(function(){var n=Object(o.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.bitbay.net/rest/trading/orderbook-limited/".concat(t,"/10")).then((function(e){return e.json()})).then((function(t){if(t.sell[0]&&t.buy[0]){var n=parseFloat(t.sell[0].ra),r=parseFloat(t.buy[0].ra);e=(n-r)/(.5*(n+r))*100}}));case 2:i(e);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[t]),Object(x.jsx)("div",{children:Object(x.jsxs)(v.a,{children:["Spread: ",Object(x.jsxs)("b",{children:[Math.floor(100*a)/100,"%"]})]})})},N=function(e){var t=e.url,n=e.pair,c=Object(r.useState)({}),a=Object(u.a)(c,2),i=a[0],b=a[1];return Object(r.useEffect)((function(){var e={};(function(){var r=Object(o.a)(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t+"stats/".concat(n)).then((function(e){return e.json()})).then((function(t){e=t.stats}));case 2:b(e);case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}})()()}),[n,t]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{children:[Object(x.jsxs)(v.a,{children:["Min: ",Object(x.jsx)("b",{children:i.l})]}),Object(x.jsxs)(v.a,{children:["Max: ",Object(x.jsx)("b",{children:i.h})]})]})})},k=Object(d.a)({offer:{display:"flex",justifyContent:"space-between",backgroundColor:"#D3D3D3",margin:"1rem",padding:"1rem"},values:{fontWeight:"bold"}}),S=function(e){var t=e.rate,n=e.quantity,r=e.numberOfOffers,c=e.currency,a=k();return Object(x.jsxs)("div",{className:a.offer,children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(v.a,{children:"Kurs"}),Object(x.jsx)(v.a,{className:a.values,children:t})]}),Object(x.jsxs)("div",{children:[Object(x.jsxs)(v.a,{children:["Ilosc ",c]}),Object(x.jsx)(v.a,{className:a.values,children:n})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(v.a,{children:"Wartosc PLN "}),Object(x.jsx)(v.a,{className:a.values,children:Math.floor(t*n*100)/100})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(v.a,{children:"Liczba offert"}),Object(x.jsx)(v.a,{className:a.values,children:r})]})]})},w=n(42);function C(e,t){return e.ra<t.ra?-1:e.ra>t.ra?1:0}var E=function(e){return"".concat(e,"_").concat((new Date).getTime())},q=function(e){var t=e.bid,n=e.currency;return Object(x.jsxs)("div",{children:[Object(x.jsx)(v.a,{variant:"h6",children:"Bid"}),t.map((function(e){return Object(x.jsx)(S,{rate:e.ra,quantity:e.ca,numberOfOffers:e.co,currency:n},E(e.ra))}))]})},D=function(e){var t=e.ask,n=e.currency;return Object(x.jsxs)("div",{children:[Object(x.jsx)(v.a,{variant:"h6",color:"initial",children:"Ask"}),t.map((function(e){return Object(x.jsx)(S,{rate:e.ra,quantity:e.ca,numberOfOffers:e.co,currency:n},E(e.ra))}))]})},J=Object(d.a)({header:{display:"flex",justifyContent:"space-between",padding:"1rem",backgroundColor:"#D3D3D3"},column:{textAlign:"center",display:"flex",flexDirection:"column"}});var P=function(){var e=J(),t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)("BTC-PLN"),d=Object(u.a)(i,2),f=d[0],O=d[1],h=Object(r.useState)([]),p=Object(u.a)(h,2),m=p[0],v=p[1],k=Object(r.useState)([]),S=Object(u.a)(k,2),E=S[0],P=S[1],T=Object(r.useState)(""),I=Object(u.a)(T,2),W=I[0],B=I[1],_="https://api.bitbay.net/rest/trading/";return Object(r.useEffect)((function(){var e=[];(function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(_+"ticker").then((function(e){return e.json()})).then((function(t){e=Object.keys(t.items).filter((function(e){return/PLN/.test(e)})).sort()}));case 2:a(e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){var e=new WebSocket("wss://api.bitbay.net/websocket/");return e.onopen=function(){return e.send(JSON.stringify({action:"subscribe-public",module:"trading",path:"orderbook-limited/".concat(f,"/10")}))},e.onmessage=function(e){var t=JSON.parse(e.data);"push"===t.action&&t.message.changes.forEach((function(e){!function(e,t,n){"Buy"===e.entryType&&"remove"===e.action?t((function(t){return t.filter((function(t){return t.ra!==e.rate})).sort(C)})):"Buy"===e.entryType&&"update"===e.action?t((function(t){return t.some((function(t){return t.ra===e.rate}))?t.map((function(t){return t.ra===e.rate?e.state:t})).sort(C):[].concat(Object(w.a)(t),[e.state]).sort(C)})):"Sell"===e.entryType&&"remove"===e.action?n((function(t){return t.filter((function(t){return t.ra!==e.rate})).sort(C)})):"Sell"===e.entryType&&"update"===e.action&&n((function(t){return t.some((function(t){return t.ra===e.rate}))?t.map((function(t){return t.ra===e.rate?e.state:t})).sort(C):[].concat(Object(w.a)(t),[e.state]).sort(C)}))}(e,v,P)}))},function(){e.OPEN&&!e.CONNECTING&&(e.send(JSON.stringify({action:"subscribe-public",module:"trading",path:"orderbook-limited/".concat(f,"/10")})),e.close())}}),[f]),Object(r.useEffect)((function(){var e=new WebSocket("wss://api.bitbay.net/websocket/");return e.onopen=function(){return e.send(JSON.stringify({requestId:"78539fe0-e9b0-4e4e-8c86-70b36aa93d4f",action:"proxy",module:"trading",path:"orderbook-limited/".concat(f,"/10")}))},e.onmessage=function(e){var t=JSON.parse(e.data);v(t.body.buy),P(t.body.sell)},B(f.split("-")[0]),function(){e.OPEN&&!e.CONNECTING&&(e.send(JSON.stringify({requestId:"78539fe0-e9b0-4e4e-8c86-70b36aa93d4f",action:"proxy",module:"trading",path:"orderbook-limited/".concat(f,"/10")})),e.close())}}),[f]),Object(x.jsx)(b.a,{maxWidth:"lg",children:Object(x.jsxs)(j.a,{container:!0,spacing:1,children:[Object(x.jsx)(j.a,{item:!0,xs:12,children:Object(x.jsxs)(l.a,{className:e.header,variant:"outlined",square:!0,children:[Object(x.jsx)(y,{currencies:c,setPair:O,pair:f}),Object(x.jsx)(g,{pair:f}),Object(x.jsx)(N,{url:_,pair:f})]})}),Object(x.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(x.jsx)(l.a,{className:e.column,variant:"outlined",square:!0,children:Object(x.jsx)(q,{pair:f,bid:m,currency:W})})}),Object(x.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(x.jsx)(l.a,{className:e.column,variant:"outlined",square:!0,children:Object(x.jsx)(D,{pair:f,ask:E,currency:W})})})]})})};a.a.render(Object(x.jsx)(P,{}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.8a55c3b9.chunk.js.map